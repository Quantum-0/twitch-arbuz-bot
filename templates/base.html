<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Quantum0's Bot{% endblock %}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/static/styles.css">
    <style> {% block styles %}{% endblock %} </style>
    {% block head_scripts %}{% endblock %}
</head>
<body>
    <header>
    <h1>Quantum0's Bot</h1>
    <nav>
        <a href="/" style="color: white; text-decoration: none;">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="/streamers" style="color: white; text-decoration: none;">–°—Ç—Ä–∏–º–µ—Ä—ã</a>
        {% if user and user.in_beta_test %}
        <a href="/debug" style="color: white; text-decoration: none;">–û—Ç–ª–∞–¥–∫–∞</a>
        {% endif %}
        {% if user and user.login_name == "quantum075" %}
        <a href="/admin" style="color: white; text-decoration: none;">–ê–¥–º–∏–Ω–∫–∞</a>
        {% endif %}
        {% if user and user.in_beta_test %}
        <a href="/kinda_roadmap" style="color: white; text-decoration: none;">TODO</a>
        {% endif %}
        <a href="https://resizer.quantum0.ru/" style="color: white; text-decoration: none;">–†–µ—Å–∞–π–∑–µ—Ä –∏–∫–æ–Ω–æ–∫ –¥–ª—è —Ç–≤–∏—á–∞</a>
        <a href="/about" style="color: white; text-decoration: none;">–û —Å–µ—Ä–≤–∏—Å–µ</a>

        <button id="themeToggle">üåô</button>
    </nav>
    <div class="user-icon">
    {% if user %}
        <a href="https://twitch.tv/{{ user.twitch_login }}"><img src="{{ user.profile_image_url }}" alt="Avatar" class="avatar"></a>
    {% endif %}
    </div>
</header>
    <div class="container" style="margin-top: 50px;">
        {% block content %}{% endblock %}
    </div>

    <footer class="site-footer">
        –°–∞–π—Ç —Å–¥–µ–ª–∞–Ω Quantum0.
        –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: Ulitochka & SillySnaily.
        <a href="/about">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
    </footer>

    {% block body_scripts %}{% endblock %}

    {% include "jumping_chibi.html" %}
</body>
<script>
const toggle = document.getElementById("themeToggle");

function setTheme(theme) {
    document.documentElement.setAttribute("data-theme", theme);
    localStorage.setItem("theme", theme);
}

function toggleTheme() {
    const current = document.documentElement.getAttribute("data-theme");
    setTheme(current === "dark" ? "light" : "dark");
}

toggle.addEventListener("click", toggleTheme);

// –∑–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π —Ç–µ–º—ã
const savedTheme = localStorage.getItem("theme");
if (savedTheme) {
    setTheme(savedTheme);
} else {
    // –∞–≤—Ç–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ
    if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
        setTheme("dark");
    }
}
</script>
</html>
